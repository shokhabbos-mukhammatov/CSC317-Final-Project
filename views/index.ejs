<%- include('./partials/header') %>

<div class="container">
  <section class="welcome-section">
    <h1><%= message %></h1>
    <p>Plan smarter with Trip Tuner. Just enter your destination, travel dates, budget, and preferences â€” and get a personalized,
      day-by-day itinerary in seconds. Powered by AI, Trip Tuner makes travel planning simple, fast, and tailored just for you.</p>
<!--    <% if(!isAuthenticated) { %>-->
<!--      <div class="action-buttons">-->
<!--        <a href="/auth/login" class="btn primary-btn">Login</a>-->
<!--        <a href="/auth/register" class="btn secondary-btn">Register</a>-->
<!--      </div>-->
<!--    <% } %>-->
  </section>

  <section class="trip-generator-form">
    <h2>Plan Your Trip</h2>
    <%- include('./partials/form-errors') %>
    <form id="tripForm" action="/generate-itinerary" method="POST" novalidate>
      <input type="hidden" name="_csrf" value="<%= csrfToken %>">

      <div class="form-group">
        <label for="destination">Destination City</label>
        <input type="text" id="destination" name="destination" required maxlength="50" pattern="[a-zA-Z\s]+" title="Only letters and spaces allowed">
      </div>

      <div class="form-group">
        <label for="days">Number of Days</label>
        <input type="number" id="days" name="days" required min="1" max="30">
      </div>

      <div class="form-group">
        <label for="startDate">Start Date</label>
        <input type="date" id="startDate" name="startDate" required>
      </div>

      <div class="form-group">
        <label for="endDate">End Date</label>
        <input type="date" id="endDate" name="endDate" required>
      </div>

      <div class="form-group">
        <label for="budget">Budget (USD)</label>
        <input type="number" id="budget" name="budget" required min="1" max="100000">
      </div>

      <div class="form-group">
        <label for="preferences">Wishes & Preferences</label>
        <textarea id="preferences" name="preferences" required minlength="10" maxlength="500"></textarea>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn primary-btn">Generate Itinerary</button>
      </div>
    </form>
  </section>

  <% if (typeof itineraryResult !== 'undefined') { %>
    <section class="trip-result">
      <h2>Your AI-Generated Itinerary</h2>
      <div class="feature-card">
        <div class="ai-itinerary-output">
          <%- itineraryResult %> <!-- Use unescaped output to render HTML -->
        </div>
      </div>
    </section>
  <% } %>

  <section class="features-section">
    <h2>Features</h2>
    <div class="feature-grid">
      <div class="feature-card">
        <h3>User Authentication</h3>
        <p>Secure login and registration with password hashing</p>
      </div>
      <div class="feature-card">
        <h3>Session Management</h3>
        <p>Persistent sessions with secure cookies</p>
      </div>
      <div class="feature-card">
        <h3>Protected Routes</h3>
        <p>Restrict access to authenticated users only</p>
      </div>
    </div>
  </section>
</div>
<%- include('./partials/footer') %>

<!--Didnt make a partials file for this because used only on this page-->
<!-- JUST A TEST for me to see if history models working: DOES NOT NEED TO BE MERGED -->
<!--actual will recieve input from AI recommendation-->
<!--<section class="history-form">-->
<!--  <h2>TEST History</h2>-->
<!--  <form action="/history/add" method="POST">-->
<!--    <div class="form-group">-->
<!--      <label for="location">Location:</label>-->
<!--      <input type="text" id="location" name="location" required>-->
<!--    </div>-->
<!--    <div class="form-group">-->
<!--      <label for="itinerary">Itinerary:</label>-->
<!--      <textarea id="itinerary" name="itinerary" rows="3" required></textarea>-->
<!--    </div>-->
<!--    <button type="submit" class="btn">Save History</button>-->
<!--  </form>-->
<!--</section>-->

